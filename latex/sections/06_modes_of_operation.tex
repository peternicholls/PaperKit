% ==============================================================================
% Section 6: Modes of Operation
% ==============================================================================
% Primary Source: 11_modes_of_operation.md
% Target Length: 500-1,000 words
% Dependencies: §3 (journey construction), §4 (distance constraints)
% ==============================================================================

% ------------------------------------------------------------------------------
% 6.1 Journey Mode
% ------------------------------------------------------------------------------
\section{Journey Mode}
\label{sec:journey-mode}

Journey Mode is the default mode of operation, optimising for \textbf{smooth, ordered sequences} suitable for timelines, gradients, transitions, and contexts where perceptual continuity matters. It leverages the full journey construction pipeline (\S\ref{sec:journey-metaphor}--\S\ref{sec:arc-length}) with perceptual constraints (\S\ref{sec:jnd}--\S\ref{sec:constraint-enforcement}).

\begin{center}
\begin{tabular}{ll}
\toprule
\textbf{Aspect} & \textbf{Behavior} \\
\midrule
Adjacency constraint & Enforces $\Delta_{\min} \leq \Delta(C_i, C_{i+1}) \leq \Delta_{\max}$ \\
Path construction & Smooth Bézier curves through anchors \\
Continuity & $C^1$ continuity at anchor junctions \\
Sampling & Arc-length parameterised for perceptual uniformity \\
\bottomrule
\end{tabular}
\end{center}

Journey Mode is appropriate for:
\begin{itemize}
    \item Timeline visualizations (progress indicators, history)
    \item State transitions (hover, active, disabled)
    \item Mood-based palettes (warm sunset, cool ocean)
    \item Animation color cycling
    \item Any context where ``flow'' matters
\end{itemize}

Journey Mode is \emph{not} appropriate for categorical data where each color represents a distinct entity, maximum contrast requirements, or semantic color mapping (red=danger, green=safe).

% ------------------------------------------------------------------------------
% 6.2 Categorical Mode
% ------------------------------------------------------------------------------
\section{Categorical Mode}
\label{sec:categorical-mode}

Categorical Mode optimizes for \textbf{maximum distinguishability} between swatches, suitable for discrete data categories, legends, and accessibility-critical applications~\cite{fairchild2013}. Unlike Journey Mode, which optimizes adjacent-color relationships (\S\ref{sec:delta-min}), Categorical Mode optimizes all pairwise relationships.

\begin{center}
\begin{tabular}{ll}
\toprule
\textbf{Aspect} & \textbf{Behavior} \\
\midrule
Distance goal & Maximize perceptual distance between all pairs \\
Path construction & May use hue maximisation, not smooth curves \\
Continuity & Not prioritised \\
Output order & Less meaningful than in Journey Mode \\
\bottomrule
\end{tabular}
\end{center}

Instead of constraining adjacent distances, Categorical Mode maximizes minimum pairwise distance:
\begin{equation}
    \max \min_{i \neq j} \|C_i - C_j\|_{\text{OKLab}}
\end{equation}

subject to staying within displayable gamut and respecting any semantic constraints.

\begin{center}
\begin{tabular}{lll}
\toprule
\textbf{Aspect} & \textbf{Journey Mode} & \textbf{Categorical Mode} \\
\midrule
Curve type & Smooth Bézier & May use angular paths \\
Sampling & Sequential along path & Optimized spacing in color space \\
Anchor role & Waypoints on path & Fixed category colors \\
Output order & Meaningful sequence & Order less important \\
\bottomrule
\end{tabular}
\end{center}

Categorical Mode is appropriate for pie charts, bar charts with distinct categories, legend colors, and status indicators (error, warning, success, info).

% ------------------------------------------------------------------------------
% 6.3 Perceptual Velocity
% ------------------------------------------------------------------------------
\section{Perceptual Velocity}
\label{sec:perceptual-velocity}

Beyond perceptual \emph{distance} (how different two colors are), \textbf{perceptual velocity} addresses how \emph{fast} color change feels along a sequence.

Fast hue swings feel ``faster'' or more noticeable than the same $\Delta E$ spent on subtle lightness shifts. The \emph{type} of change affects perceived speed, not just the magnitude. This observation is consistent with color appearance research showing that hue changes are more salient than equivalent lightness or chroma changes~\cite{fairchild2013}.

Perceptual velocity $v$ can be modeled as a weighted sum of the rates of change \emph{with respect to arc-length} $s$:
\begin{equation}
    v = w_L \cdot \frac{dL}{ds} + w_C \cdot \frac{dC}{ds} + w_h \cdot \frac{dh}{ds}
\end{equation}

The arc-length parameterization (\S\ref{sec:arc-length}) ensures that equal increments of $s$ correspond to equal perceptual distances along the path. Therefore, velocity here refers to the \emph{rate of attribute change per unit of perceptual distance traveled}---not the raw rate of change with respect to the Bézier parameter $t$, which would vary unpredictably based on control point placement. A high velocity indicates that specific attributes (particularly hue) are changing rapidly relative to the overall perceptual motion through color space.

The following weights are \textbf{proposed engineering constants} derived from practical experimentation during reference implementation testing, not empirically-validated constants from formal psychophysical studies:

\begin{center}
\begin{tabular}{lll}
\toprule
\textbf{Dimension} & \textbf{Relative Weight} & \textbf{Perceptual Effect} \\
\midrule
Lightness ($L$) & 1.0 (baseline) & Subtle, gradual feel \\
Chroma ($C$) & $\sim$1.2 & Moderate drama \\
Hue ($h$) & $\sim$1.5--2.0 & High impact, ``fast'' feel \\
\bottomrule
\end{tabular}
\end{center}

\textit{Note: These weights reflect observed behavior in prototype testing. Formal psychophysical validation remains future work.}

Velocity is relevant for temporal applications:
\begin{itemize}
    \item \textbf{Calm presets} prefer $L/C$ changes over hue (low velocity)
    \item \textbf{Energetic presets} use more hue swings (high velocity)
    \item \textbf{Rhythmic effects} alternate high/low velocity regions
\end{itemize}

\subsection*{Influencing Velocity}

Users do not directly set velocity weights---they are internal heuristics. Instead, perceptual velocity emerges from the interaction of style parameters with anchor placement:

\begin{itemize}
    \item \textbf{High temperature} increases hue travel between anchors, raising perceived velocity
    \item \textbf{High intensity} creates more curved paths with greater chromatic excursion
    \item \textbf{Anchors with similar hues} produce low-velocity journeys dominated by lightness changes
    \item \textbf{Anchors spanning the color wheel} produce high-velocity journeys with rapid hue shifts
\end{itemize}

Presets encode velocity profiles implicitly: ``calm'' presets (\texttt{smooth}, \texttt{muted}) prefer parameters that minimise hue change, while ``energetic'' presets (\texttt{vivid}, \texttt{neon}) encourage chromatic drama.

% ------------------------------------------------------------------------------
% 6.4 Mode Selection Guidelines
% ------------------------------------------------------------------------------
\section{Mode Selection Guidelines}
\label{sec:mode-selection}

\begin{center}
\begin{tabular}{p{5cm}l}
\toprule
\textbf{Use Case} & \textbf{Recommended Mode} \\
\midrule
Output for discrete categories? & Categorical \\
Need smooth animation? & Journey + closed/pingpong loop \\
Need timeline colors? & Journey + open path \\
Need mood palette from single color? & Journey + single anchor \\
Need maximum contrast? & Categorical with high separation \\
\bottomrule
\end{tabular}
\end{center}

\subsection*{Hybrid Approaches}

Some applications benefit from combining modes:

\begin{enumerate}
    \item \textbf{Categorical anchors, journey fill:} Use Categorical Mode to select maximally distinct anchors, then Journey Mode for smooth transitions between them
    
    \item \textbf{Journey with velocity control:} Use Journey Mode but adjust sampling based on velocity for rhythmic effects
    
    \item \textbf{Mode switching:} Different parts of an application use different modes (categorical for legend, journey for timeline)
\end{enumerate}
