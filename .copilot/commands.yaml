# .copilot/commands.yaml
# Master command registry - routes user input to agents and workflows

version: "1.0.0"
description: "Registry of all slash commands available in the Copilot Research Paper Assistant Kit"

command-groups:
  setup: "Project initialization and canonical document creation"
  sprint: "Sprint planning, task tracking, and review"
  core: "Core paper writing workflow"
  specialist: "Support agents for ideation, feedback, and problem-solving"

commands:
  # Setup Phase
  setup:
    paper.init:
      name: "paper.init"
      description: "Initialize session and capture project goals"
      display: "Init session / capture goals"
      agent: "paper-architect"
      triggers:
        - "/paper.init"
        - "*init"
        - "paper init"
      category: "setup"
      workflow: "initialization"
      spec-file: "commands/paper/init.yaml"
      requires-consent: false
      order: 1

    paper.objectives:
      name: "paper.objectives"
      description: "Set aims, objectives, and success criteria"
      display: "Set aims & objectives"
      agent: "paper-architect"
      triggers:
        - "/paper.objectives"
      category: "setup"
      workflow: "initialization"
      spec-file: "commands/paper/objectives.yaml"
      requires-consent: false
      order: 2

    paper.requirements:
      name: "paper.requirements"
      description: "Define technical requirements and specifications"
      display: "Set technical requirements"
      agent: "paper-architect"
      triggers:
        - "/paper.requirements"
      category: "setup"
      workflow: "initialization"
      spec-file: "commands/paper/requirements.yaml"
      requires-consent: false
      order: 3

    paper.spec:
      name: "paper.spec"
      description: "Define content specification and direction"
      display: "Set content specification"
      agent: "paper-architect"
      triggers:
        - "/paper.spec"
      category: "setup"
      workflow: "initialization"
      spec-file: "commands/paper/spec.yaml"
      requires-consent: false
      order: 4

  # Sprint Phase
  sprint:
    paper.sprint-plan:
      name: "paper.sprint-plan"
      description: "Create and plan a new sprint"
      display: "Plan a sprint"
      agent: "paper-architect"
      triggers:
        - "/paper.sprint-plan"
      category: "sprint"
      workflow: "sprint"
      spec-file: "commands/paper/sprint-plan.yaml"
      requires-consent: false

    paper.tasks:
      name: "paper.tasks"
      description: "Track and update sprint tasks"
      display: "Manage sprint tasks"
      agent: "paper-system"
      triggers:
        - "/paper.tasks"
      category: "sprint"
      workflow: "sprint"
      spec-file: "commands/paper/tasks.yaml"
      requires-consent: false

    paper.review:
      name: "paper.review"
      description: "Review sprint outcomes and plan next steps"
      display: "Review sprint"
      agent: "paper-system"
      triggers:
        - "/paper.review"
      category: "sprint"
      workflow: "sprint"
      spec-file: "commands/paper/review.yaml"
      requires-consent: false

  # Core Writing Workflow
  core:
    paper.plan:
      name: "paper.plan"
      description: "Create detailed paper outline and plan"
      display: "Plan paper outline"
      agent: "paper-architect"
      triggers:
        - "/paper.plan"
      category: "core"
      workflow: "core-writing"
      spec-file: "commands/paper/plan.yaml"
      requires-consent: false

    paper.research:
      name: "paper.research"
      description: "Consolidate research into reference documents"
      display: "Research & consolidate"
      agent: "research-consolidator"
      triggers:
        - "/paper.research"
      category: "core"
      workflow: "core-writing"
      spec-file: "commands/paper/research.yaml"
      requires-consent: false

    paper.draft:
      name: "paper.draft"
      description: "Draft individual paper section"
      display: "Draft section"
      agent: "section-drafter"
      triggers:
        - "/paper.draft"
      category: "core"
      workflow: "core-writing"
      spec-file: "commands/paper/draft.yaml"
      requires-consent: false

    paper.refine:
      name: "paper.refine"
      description: "Refine and improve draft section"
      display: "Refine section"
      agent: "quality-refiner"
      triggers:
        - "/paper.refine"
      category: "core"
      workflow: "core-writing"
      spec-file: "commands/paper/refine.yaml"
      requires-consent: false

    paper.refs:
      name: "paper.refs"
      description: "Manage bibliography and citations"
      display: "Manage references"
      agent: "reference-manager"
      triggers:
        - "/paper.refs"
      category: "core"
      workflow: "core-writing"
      spec-file: "commands/paper/refs.yaml"
      requires-consent: true
      tools-used:
        - "format-references.py"

    paper.assemble:
      name: "paper.assemble"
      description: "Integrate sections and compile PDF"
      display: "Assemble & compile"
      agent: "latex-assembler"
      triggers:
        - "/paper.assemble"
      category: "core"
      workflow: "core-writing"
      spec-file: "commands/paper/assemble.yaml"
      requires-consent: true
      tools-used:
        - "lint-latex.sh"
        - "validate-structure.py"
        - "build-latex.sh"

  # Specialist Commands
  specialist:
    paper.brainstorm:
      name: "paper.brainstorm"
      description: "Brainstorm ideas and explore creative options"
      display: "Brainstorm"
      agent: "brainstorm"
      triggers:
        - "/paper.brainstorm"
      category: "specialist"
      spec-file: "commands/paper/specialist/brainstorm.yaml"
      requires-consent: false

    paper.solve:
      name: "paper.solve"
      description: "Solve blockers and identify root causes"
      display: "Solve problem"
      agent: "problem-solver"
      triggers:
        - "/paper.solve"
      category: "specialist"
      spec-file: "commands/paper/specialist/solve.yaml"
      requires-consent: false

    paper.tutor-feedback:
      name: "paper.tutor-feedback"
      description: "Get feedback and critique on draft"
      display: "Get tutor feedback"
      agent: "tutor"
      triggers:
        - "/paper.tutor-feedback"
      category: "specialist"
      spec-file: "commands/paper/specialist/tutor-feedback.yaml"
      requires-consent: false

    paper.librarian-research:
      name: "paper.librarian-research"
      description: "Research and find sources"
      display: "Find sources"
      agent: "librarian"
      triggers:
        - "/paper.librarian-research"
      category: "specialist"
      spec-file: "commands/paper/specialist/librarian-research.yaml"
      requires-consent: false

    paper.librarian-sources:
      name: "paper.librarian-sources"
      description: "Evaluate and track sources"
      display: "Track sources"
      agent: "librarian"
      triggers:
        - "/paper.librarian-sources"
      category: "specialist"
      spec-file: "commands/paper/specialist/librarian-sources.yaml"
      requires-consent: false

    paper.librarian-gaps:
      name: "paper.librarian-gaps"
      description: "Identify research gaps"
      display: "Identify gaps"
      agent: "librarian"
      triggers:
        - "/paper.librarian-gaps"
      category: "specialist"
      spec-file: "commands/paper/specialist/librarian-gaps.yaml"
      requires-consent: false
